<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#ffffff" />
  <title>LINE å…¥å£ï½œMiracle Mind å¥‡è¹Ÿå¿ƒéˆ</title>
  <meta name="description" content="Miracle Mind å¥‡è¹Ÿå¿ƒéˆ LINE å®˜æ–¹å…¥å£ï¼šå®˜æ–¹å¸³è™Ÿèˆ‡é™ªä¼´ç¾¤çµ„ã€‚" />
  <!-- ğŸ”— canonicalï¼šé¿å…ç¶²å€é‡è¤‡æ”¶éŒ„å•é¡Œ -->
  <link rel="canonical" href="https://miracle-mind.org/line.html" />

  <style>
    :root{
      --bg:#ffffff;
      --text:#111;
      --muted:rgba(0,0,0,.62);
      --card:rgba(0,0,0,.03);
      --border:rgba(0,0,0,.08);
      --shadow:0 10px 30px rgba(0,0,0,.06);
      --radius:18px;
      --ok:#0a7a3d;
      --warn:#9b5b00;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans TC","PingFang TC","Microsoft JhengHei",Arial,sans-serif;
      background:var(--bg);
      color:var(--text);
    }
    .wrap{ max-width:520px; margin:0 auto; padding:24px 18px 44px; }
    .title{ font-size:26px; font-weight:900; letter-spacing:.2px; line-height:1.2; margin-top:8px; }
    .sub{ font-size:14px; color:var(--muted); line-height:1.65; margin-top:8px; }
    .pill{
      display:inline-block; margin-top:12px; padding:8px 12px;
      border-radius:999px; border:1px solid var(--border); background:#fff;
      font-size:12px; color:rgba(0,0,0,.6);
    }
    .card{
      margin-top:18px;
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:16px;
    }
    .btn{
      width:100%;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:14px;
      padding:16px 16px;
      border-radius:14px;
      border:1px solid var(--border);
      background:#fff;
      text-decoration:none;
      color:var(--text);
      margin-top:12px;
      transition:transform .05s ease, box-shadow .12s ease;
      cursor:pointer;
    }
    .btn:active{ transform:scale(.99); }
    .left{ display:flex; flex-direction:column; gap:4px; }
    .main{ font-size:16px; font-weight:900; line-height:1.25; }
    .hint{ font-size:13px; color:var(--muted); line-height:1.35; }
    .arrow{ font-size:18px; opacity:.5; flex:0 0 auto; }
    .banner{
      margin-top:14px;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--border);
      background:#fff;
      font-size:13px;
      line-height:1.55;
      color:rgba(0,0,0,.7);
    }
    .banner strong{ color:var(--text); }
    .tag{
      display:inline-block;
      font-size:12px;
      padding:3px 8px;
      border-radius:999px;
      margin-right:8px;
      border:1px solid var(--border);
      background:#fff;
    }
    .tag.ok{ color:var(--ok); }
    .tag.warn{ color:var(--warn); }
    .note{
      margin-top:14px;
      font-size:13px;
      color:var(--muted);
      line-height:1.65;
    }
    .tiny{
      margin-top:14px;
      font-size:12px;
      color:rgba(0,0,0,.45);
      line-height:1.6;
    }
    .hidden{ display:none !important; }
  </style>
</head>

<body>
  <main class="wrap">
    <div class="title">Miracle Mind</div>
    <div class="sub">å¥‡è¹Ÿå¿ƒéˆ AI å°å¸«ï½œLINE å®˜æ–¹å…¥å£</div>
    <div class="sub">ä½ å¯ä»¥åŠ å…¥å®˜æ–¹å¸³è™Ÿï¼Œæˆ–é€²å…¥é™ªä¼´ç¾¤çµ„ï¼ˆè‹¥ç¾¤çµ„å…¥å£æ›´æ–°ï¼Œå®˜æ–¹å¸³è™Ÿæœƒæä¾›æœ€æ–°é€£çµï¼‰ã€‚</div>
    <span class="pill">ä¸è©•åƒ¹ï½œæº«æŸ”é™ªä¼´ï½œå›åˆ°å¹³å®‰</span>

    <section class="card" aria-label="LINE å…¥å£">
      <!-- è£ç½®æç¤º -->
      <div id="deviceBanner" class="banner hidden"></div>

      <!-- âœ… å®˜æ–¹å¸³è™Ÿï¼ˆå›ºå®šï¼‰ -->
      <a id="oaBtn" class="btn" href="#" rel="noopener">
        <div class="left">
          <div class="main">åŠ å…¥ LINE å®˜æ–¹å¸³è™Ÿ</div>
          <div class="hint">å¾é¸å–®é–‹å§‹ï½œæœ€é©åˆç¬¬ä¸€æ¬¡ä¾†çš„äºº</div>
        </div>
        <div class="arrow">â€º</div>
      </a>

      <!-- âœ… é™ªä¼´ç¾¤çµ„ï¼ˆå¯èƒ½å¤±æ•ˆ/æ›´æ–°ï¼‰ -->
      <a id="groupBtn" class="btn" href="#" rel="noopener">
        <div class="left">
          <div class="main">åŠ å…¥ LINE é™ªä¼´ç¾¤çµ„</div>
          <div id="groupHint" class="hint">ä¸€èµ·ç·´ç¿’å¹³éœï½œæº«æŸ”åˆ†äº«ç©ºé–“</div>
        </div>
        <div class="arrow">â€º</div>
      </a>

      <!-- ç¾¤çµ„å¤±æ•ˆæ™‚çš„æç¤ºå€ -->
      <div id="groupFallback" class="banner hidden">
        <span class="tag warn">æç¤º</span>
        ç¾¤çµ„å…¥å£å¯èƒ½å·²æ›´æ–°æˆ–æš«æ™‚ç„¡æ³•é–‹å•Ÿã€‚è«‹å…ˆåŠ å…¥ <strong>LINE å®˜æ–¹å¸³è™Ÿ</strong>ï¼Œåœ¨é¸å–®ä¸­å–å¾—æœ€æ–°ç¾¤çµ„å…¥å£ã€‚
      </div>

      <div class="note">
        <strong>å°æé†’ï¼š</strong>
        æœ¬å¹³å°æä¾›ä¸€èˆ¬æ€§çš„é™ªä¼´èˆ‡è‡ªæˆ‘æ•´ç†ï¼Œä¸ç­‰åŒæ–¼å¿ƒç†æ²»ç™‚ã€é†«ç™‚æˆ–ç·Šæ€¥æ•‘åŠ©ã€‚
        è‹¥ä½ æ­£è™•æ–¼åš´é‡æƒ…ç·’å±æ©Ÿæˆ–å®‰å…¨é¢¨éšªï¼Œè«‹ç«‹å³å°‹æ±‚ç•¶åœ°ç·Šæ€¥æœå‹™æˆ–å°ˆæ¥­å”åŠ©ã€‚
      </div>

      <div class="tiny" id="tips">
        è‹¥æŒ‰éˆ•ç„¡æ³•é–‹å•Ÿï¼šè«‹æ›´æ–° LINE Appï¼Œæˆ–æ”¹ç”¨æ‰‹æ©Ÿç€è¦½å™¨é–‹å•Ÿæœ¬é ã€‚
      </div>
    </section>
  </main>

  <script>
    // =========================
    // âœ… ä½ åªè¦æ”¹é€™å…©å€‹å°±å¥½
    // =========================
    const OA_URL = "https://line.me/R/ti/p/@276rrrsx";

    // ç¾¤çµ„é‚€è«‹é€£çµï¼šå¯å…ˆç•™ç©º ""ï¼ˆç•™ç©ºæ™‚æœƒè‡ªå‹•é¡¯ç¤ºã€Œè«‹å…ˆåŠ å…¥å®˜æ–¹å¸³è™Ÿã€ï¼‰
    const GROUP_INVITE_URL = "https://lin.ee/VV9wH99"; // â† è²¼ä¸Šä½ çš„ç¾¤çµ„é‚€è«‹é€£çµï¼Œä¾‹å¦‚ https://line.me/R/ti/g/xxxxxxxx

    // =========================
    // é€²éšï¼šè£ç½®åµæ¸¬ + deep link
    // =========================
    const ua = navigator.userAgent || "";
    const isIOS = /iPhone|iPad|iPod/i.test(ua);
    const isAndroid = /Android/i.test(ua);
    const isMobile = isIOS || isAndroid;

    const deviceBanner = document.getElementById("deviceBanner");
    const oaBtn = document.getElementById("oaBtn");
    const groupBtn = document.getElementById("groupBtn");
    const groupHint = document.getElementById("groupHint");
    const groupFallback = document.getElementById("groupFallback");
    const tips = document.getElementById("tips");

    // è¨­å®šæŒ‰éˆ• hrefï¼ˆå…ˆç”¨ https é€£çµï¼Œç¢ºä¿æ¡Œæ©Ÿä¹Ÿèƒ½ç”¨ï¼‰
    oaBtn.href = OA_URL;
    oaBtn.target = "_blank";

    // å¦‚æœæ²’æœ‰ç¾¤çµ„é€£çµ â†’ ç›´æ¥é¡¯ç¤º fallback
    const hasGroupUrl = typeof GROUP_INVITE_URL === "string" && GROUP_INVITE_URL.trim().length > 0;
    if (hasGroupUrl) {
      groupBtn.href = GROUP_INVITE_URL;
      groupBtn.target = "_blank";
    } else {
      groupBtn.href = OA_URL;
      groupBtn.target = "_blank";
      groupHint.textContent = "ç¾¤çµ„å…¥å£æœƒä¸å®šæœŸæ›´æ–°ï½œè«‹å…ˆåŠ å…¥å®˜æ–¹å¸³è™Ÿå–å¾—æœ€æ–°å…¥å£";
      groupFallback.classList.remove("hidden");
    }

    // è£ç½®æç¤º
    function setBanner(html) {
      deviceBanner.innerHTML = html;
      deviceBanner.classList.remove("hidden");
    }

    if (isMobile) {
      const osText = isIOS ? "iOS" : "Android";
      setBanner(`
        <span class="tag ok">åµæ¸¬</span>
        ä½ æ­£åœ¨ä½¿ç”¨ <strong>${osText}</strong> è£ç½®ã€‚å»ºè­°é»é¸æŒ‰éˆ•å¾Œï¼Œè‹¥ç³»çµ±è©¢å•ã€Œç”¨ LINE é–‹å•Ÿã€ï¼Œè«‹é¸æ“‡ <strong>é–‹å•Ÿ</strong>ã€‚
      `);
      tips.textContent = "è‹¥æœªè‡ªå‹•è·³åˆ° LINEï¼šè«‹ç¢ºèªå·²å®‰è£ LINEï¼Œæˆ–æ”¹ç”¨æ‰‹æ©Ÿç€è¦½å™¨é–‹å•Ÿæœ¬é ã€‚";
    } else {
      setBanner(`
        <span class="tag ok">æç¤º</span>
        ä½ ç›®å‰ä½¿ç”¨æ¡Œæ©Ÿã€‚åŠ å…¥ LINE å¾Œï¼Œå»ºè­°ç”¨æ‰‹æ©Ÿé–‹å•Ÿæœ¬é ï¼ˆæˆ–æƒæ QRï¼‰æœƒæ›´é †ã€‚
      `);
    }

    // deep link å˜—è©¦ï¼ˆåƒ…åœ¨æ‰‹æ©Ÿå˜—è©¦ï¼›å¤±æ•—å‰‡é€€å› httpsï¼‰
    // æ³¨æ„ï¼šdeep link åœ¨ä¸åŒè£ç½®/ç€è¦½å™¨è¡Œç‚ºä¸ä¸€ï¼Œæ‰€ä»¥æˆ‘å€‘ã€Œä¸å¼·è¿«ã€ï¼Œåªåœ¨é»æ“Šæ™‚å˜—è©¦ã€‚
    function toLineDeepLink(url) {
      // å°‡ https://line.me/... å˜—è©¦è½‰ç‚º line://...ï¼ˆéƒ¨åˆ†è£ç½®æ”¯æ´ï¼‰
      if (!url) return "";
      if (url.startsWith("line://")) return url;
      if (url.startsWith("https://line.me/")) return url.replace("https://line.me/", "line://");
      if (url.startsWith("http://line.me/")) return url.replace("http://line.me/", "line://");
      return "";
    }

    async function tryOpenLine(url, fallbackUrl) {
      if (!isMobile) return true;

      const deep = toLineDeepLink(url);
      if (!deep) return true;

      // å˜—è©¦é–‹å•Ÿ deep link
      const start = Date.now();
      window.location.href = deep;

      // å¦‚æœ 1.2 ç§’å¾Œä»åœ¨é é¢ï¼Œè¦–ç‚ºå¯èƒ½å¤±æ•— â†’ fallback åˆ° https
      setTimeout(() => {
        const stillHere = (Date.now() - start) < 2000;
        if (stillHere && fallbackUrl) window.location.href = fallbackUrl;
      }, 1200);

      return true;
    }

    // ç¾¤çµ„æŒ‰éˆ•ï¼šè‹¥é–‹å•Ÿå¤±æ•—/é€£çµç©ºç™½ï¼Œé¡¯ç¤º fallback å¼•å°
    groupBtn.addEventListener("click", (e) => {
      // è‹¥æ²’æœ‰ç¾¤çµ„é€£çµï¼Œå·²ç¶“å°å‘ OAï¼›ä½†ä»é˜»æ­¢é è¨­ï¼Œæ”¹ç”¨ deep link å˜—è©¦
      e.preventDefault();

      if (!hasGroupUrl) {
        groupFallback.classList.remove("hidden");
        tryOpenLine(OA_URL, OA_URL);
        return;
      }

      // æœ‰ç¾¤çµ„é€£çµï¼šå…ˆå˜—è©¦ deep linkï¼Œè‹¥å¯èƒ½å¤±æ•—å†å› https
      tryOpenLine(GROUP_INVITE_URL, GROUP_INVITE_URL);

      // é¡å¤–ä¿éšªï¼šå¦‚æœç¾¤çµ„é€£çµç‚ºç©ºã€æˆ–ä½¿ç”¨è€…å›å ±å¤±æ•ˆï¼Œä½ åªè¦æŠŠ GROUP_INVITE_URL æ¸…ç©º
      // å°±æœƒè‡ªå‹•é¡¯ç¤ºã€Œè«‹å…ˆåŠ å…¥å®˜æ–¹å¸³è™Ÿå–å¾—æœ€æ–°å…¥å£ã€ã€‚
    });

    // å®˜æ–¹å¸³è™ŸæŒ‰éˆ•ï¼šdeep link å˜—è©¦
    oaBtn.addEventListener("click", (e) => {
      e.preventDefault();
      tryOpenLine(OA_URL, OA_URL);
    });
  </script>
</body>
</html>
